# Voice-RAG: Hybrid Real-Time AI Assistant

`Voice-RAG` is a sophisticated, modular AI voice assistant powered by **AWS Bedrock**. It utilizes a unique **Hybrid Reasoning Architecture** where specialized models handle different tasks to ensure both lightning-fast voice responses and high-quality, accurate intelligence.

## üèóÔ∏è Hybrid Architecture: "The Brain & The Voice"

Unlike standard voice bots, Voice-RAG splits the "thinking" from the "speaking":

1.  **The Brain (Nova Lite):** Used as the reasoning layer. When searching documents (RAG) or the web, Nova Lite analyzes the raw data and synthesizes a concise, professional summary.
2.  **The Voice (Nova Sonic):** Used for the real-time conversation. It handles the user's speech, manages interruptions, and speaks the summaries generated by the "Brain."
3.  **The Memory (ChromaDB):** A local vector database that stores and retrieves your uploaded documents using **Titan V2 Text Embeddings**.

## üìÇ Modular Code Structure

The project is divided by functionality to ensure maintainability and extensibility:

-   **`main.py`**: The entry point. Manages the FastAPI server and mounts the WebSocket + knowledge routes.
-   **`src/services/voice_orchestrator.py`**: Assembles the `BidiAgent`, defines the system persona, and integrates tools.
-   **`src/services/knowledge_base.py`**: The data layer. Handles PDF/Text parsing, ChromaDB operations, and embedding generation.
-   **`src/tools/rag.py`**: The RAG tool. Retrieves chat-scoped context and uses **Nova Lite** to synthesize an answer.
-   **`src/tools/web.py`**: The Web tool. Searches DuckDuckGo and uses **Nova Lite** to summarize results.
-   **`src/core/config.py`**: Centralized configuration for models, regions, and audio parameters.

## üöÄ Key Features

-   **Intelligent RAG:** Ingest PDFs or text files via the dashboard and ask questions about them instantly.
-   **Deep Web Search:** When asked, the bot searches the entire web using DuckDuckGo (no API keys required).
-   **Natural Interruption (Barge-in):** Speak over the bot at any time; it will stop instantly and listen to your new command.
-   **Smooth Audio:** Implements a **Scheduled Playback Queue** and jitter buffer in the browser to prevent choppy voice.
-   **Session Privacy:** The knowledge base is automatically cleared after every session to ensure a fresh start.
-   **Universal Auth:** Supports AWS IAM Keys, SSO Sessions, and Bedrock Bearer Tokens.

## üéÆ Getting Started

1.  **Install:** `uv sync`
2.  **Configure:** Add your AWS credentials to `.env`.
3.  **Run:** `uv run main.py`
4.  **Interact:** Open `http://127.0.0.1:8000`, upload a file, and start talking!

## üí¨ Chat Sessions (Chat ID)

- Each WebSocket connection gets a unique `chat_id`.
- File ingestion is scoped to that `chat_id`, so one chat cannot ‚Äúsee‚Äù another chat‚Äôs documents.
- When the chat ends (WebSocket disconnect), the server clears both the chat session memory and that chat‚Äôs RAG context from ChromaDB.

---
Built for high-performance AI research and real-time document interaction.
